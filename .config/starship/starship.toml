# =========================
# Starship (focused version)
# 主役: C/C++, Python, Bash
# 予備: Rust, Go
# =========================
add_newline = true
command_timeout = 1000
scan_timeout = 10

# 1行目: 環境/ユーザ@ホスト(SSH時) / ディレクトリ / Git / 言語 / 実行時間 / ステータス
# 2行目: 入力記号
format = """
$env_var$os$username$hostname$directory$git_branch$git_status$c$python$rust$golang$shell$cmd_duration$status
$character"""

[character]
success_symbol = "[➜](bold green) "
error_symbol   = "[✗](bold red) "
vicmd_symbol   = "[❮](bold yellow) "

# ---- ディレクトリ（Nerd Font不要な絵文字を既定に） ----
[directory]
truncation_length = 3
truncate_to_repo = false
style = "cyan"
format = "📂 [$path]($style) "
read_only = " "

# Nerd Fontのフォルダアイコンに変えたい場合（上のformatをコメントアウトし、こちらを有効化）
# format = "󰉋 [$path]($style) "     # <- Nerd Font

[directory.substitutions]
"~/workspace" = " ws"
"~/projects"  = " proj"

# ---- Git ----
[git_branch]
symbol = " "         # Nerd Font (なくても文字化けするだけで動作はOK)
format = "[$symbol$branch]($style) "
style = "purple"

[git_status]
style  = "yellow"
format = '([$all_status$ahead_behind]($style)) '
conflicted = " "
staged     = "+"
modified   = "!"
untracked  = "?"
stashed    = " "
ahead      = "⇡${count}"
behind     = "⇣${count}"
diverged   = "⇕${ahead_count}/${behind_count}"

# ---- 言語（条件を満たすときだけ表示） ----
# C/C++
[c]
symbol = " "         # Nerd Font (なくてもOK) 代わりに "C++ " などでも可
format = "[$symbol$version]($style) "
style = "bright-blue"
detect_extensions = ["c", "h", "cpp", "cxx", "cc", "hpp", "hh", "ipp"]
detect_files = ["CMakeLists.txt", "Makefile"]

# Python（速度優先：venv名のみ）
[python]
symbol = "🐍 "
format = "[$symbol($virtualenv)]($style) "
style = "blue"
detect_files = ["pyproject.toml", "requirements.txt", "setup.py"]

# Rust（残す）
[rust]
symbol = "🦀 "
format = "[$symbol$version]($style) "
style = "red"
detect_files = ["Cargo.toml"]

# Go（残す）
[golang]
symbol = " "
format = "[$symbol$version]($style) "
style = "bold cyan"

# Bash は言語モジュールは無いので、現在のシェルを薄く表示
[shell]
disabled = false
bash_indicator = "bash"
zsh_indicator = "zsh"
fish_indicator = "fish"
powershell_indicator = "pwsh"
unknown_indicator = "sh"
format = "[$indicator]($style) "
style = "dimmed"

# ---- 遅い時だけ実行時間を表示 ----
[cmd_duration]
min_time = 800
format = "took [$duration]($style) "
style = "dimmed italic white"

# ---- ステータス（失敗時だけ） ----
[status]
disabled = false
recognize_signal_code = true
format = "[$symbol$status]($style) "
map_symbol = true
style = "bold red"
pipestatus = false

# ---- 環境ヒント ----
[env_var.WSL]
variable = "WSL_DISTRO_NAME"
format = "[WSL:$env_value ](dimmed green)"

[os]
disabled = false
format = "[$symbol]($style) "
style = "dimmed"
[os.symbols]
Ubuntu = "󰕈 "
Linux  = " "
Windows = " "

[hostname]
ssh_only = true
format = "[@$hostname](dimmed purple) "

[username]
show_always = false
style_user = "bold white"
style_root = "bold red"
format = "[$user]($style)"

[package]
disabled = true

[time]
disabled = true
